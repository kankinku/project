{% load static %}
<html lang="ko-kr">
<head>
    <meta charset="UTF-8">
    <title>Study Planner</title>
    <link rel="stylesheet" type="text/css" href="{% static 'dashboard.css' %}">
</head>
<body>
    <div class="container">
        <h1 class="head-name">Hello, {{ user.name }}!</h1>
        <a class="create-class-btn" href="{% url 'create_class' %}">Create</a>
        <a class="delete-btn" href="{% url 'delete_class' %}">Delete</a>
        <a class="summary-btn" href="{% url 'grade_summary' %}">Summary</a>
        <a class="logout-btn" href="{% url 'logout' %}">Logout</a>
    </div>
    <div class="schedule__container">
        <div class="days__container">
            <span class="corner"></span>
            <div class="day">Sunday</div>
            <div class="day">Monday</div>
            <div class="day">Tuesday</div>
            <div class="day">Wednesday</div>
            <div class="day">Thursday</div>
            <div class="day">Friday</div>
            <div class="day">Saturday</div>
        </div>
        <div class="part__day">
            <span class="time">9am <br> - <br> 10pm</span>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
        </div>
        <div class="part__day">
            <span class="time">10am <br> - <br> 11am</span>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
        </div>
        <div class="part__day">
            <span class="time">11am <br> - <br> 12am</span>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
        </div>
        <div class="part__day">
            <span class="time">12am <br> - <br> 1pm</span>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
        </div>
        <div class="part__day">
            <span class="time">1pm <br> - <br> 2pm</span>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
        </div>
        <div class="part__day">
            <span class="time">2pm <br> - <br> 3pm</span>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
        </div>
        <div class="part__day">
            <span class="time">3pm <br> - <br> 4pm</span>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
        </div>
        <div class="part__day">
            <span class="time">5pm <br> - <br> 6pm</span>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
            <div class="task"></div>
        </div>
    </div>
</body>
<script>
    const classes = {{ class_list_json|safe }};
    const dayMap = { '일': 0, '월': 1, '화': 2, '수': 3, '목': 4, '금': 5, '토': 6 };
    const rows = document.querySelectorAll('.part__day');

    // 과목별 고유 색상 생성 (기본 팔레트 또는 해시 기반)
    const subjectColors = {};
    const colorPalette = [
        '#6fc6ef', '#38ddeb', '#55eeca', '#a4f899',
        '#D8A7B1', '#4A5568', '#B9A7D1', '#A0C1C9'
    ];
    let colorIndex = 0;

    function getColorForSubject(subject) {
        if (!subjectColors[subject]) {
            subjectColors[subject] = colorPalette[colorIndex % colorPalette.length];
            colorIndex++;
        }
        return subjectColors[subject];
    }

    classes.forEach(cls => {
        const color = getColorForSubject(cls.name);
        cls.time.forEach(slot => {
            const dayChar = slot[0];
            const timeNum = parseInt(slot.slice(1));
            const colIdx = dayMap[dayChar];
            const rowIdx = timeNum - 1;

            const cell = rows[rowIdx].querySelectorAll('.task')[colIdx];
            if (cell) {
                cell.style.backgroundColor = color;
                cell.textContent = cls.name;
                cell.style.color = "#f3f9ff";
                cell.style.fontSize = "1.5rem";
            }
        });
    });

    const tasks = document.querySelectorAll('.task');

    tasks.forEach(function(task) {
        task.addEventListener('click', function () {
            task.classList.toggle('active');
        });
    });

</script>
</html>


{% comment %}  이런식으로 정보 불러오면 됨 {{ user.email }} {% endcomment %}
